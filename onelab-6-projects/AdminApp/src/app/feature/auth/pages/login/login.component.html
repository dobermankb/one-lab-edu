<div class="background"></div>
<div class="fade-in container d-flex vh-100 vw-100">
  <div class="authform authform--transpgray authform--shadow mx-auto my-auto" *ngIf="loginForm">
    <form class="form-group" [formGroup]="loginForm" (ngSubmit)="login()">
      <h3 class="authform__title text-center my-3">Login</h3>

      <input class="form-control authform--text-input d-block w-75 mt-1 mx-auto p-2"
             type="text"
             placeholder="Enter email"
             formControlName= "email"
             [ngClass]="{ 'is-invalid': this.email?.touched && this.email?.errors }"
             autofocus/>
      <div *ngIf="email?.touched && email?.errors" class="invalid-feedback text-center w-75 h-100 mx-auto">
        <div *ngIf="email?.errors?.required" class="small">Email is required</div>
        <div *ngIf="email?.errors?.email" class="small">Email must be valid</div>
        <div *ngIf="email?.errors?.maxlength" class="small">Email is too long</div>
      </div>
      <input class="form-control authform--text-input d-block w-75 mt-1 mx-auto p-2"
             type="password"
             placeholder="Enter password"
             formControlName= "password"
             [ngClass]="{ 'is-invalid': this.password?.touched && this.password?.errors }"/>
      <div *ngIf="password?.touched && password?.errors" class="text-center invalid-feedback w-75 h-100 mx-auto">
        <div *ngIf="password?.errors?.required" class="small">Password is required</div>
        <div *ngIf="password?.errors?.minlength" class="small">Password is too short</div>
        <div *ngIf="password?.errors?.maxlength" class="small">Password is too long</div>
      </div>
      <button type="submit"
              class="btn btn-primary text-truncate d-block w-75 p-1 mt-3 mb-1 mx-auto"
              [disabled]="loginForm.invalid || (isLoading$ | async)">
        Login
      </button>
      <p class="text-center text-secondary text-truncate w-75 mx-auto" *ngIf="isLoading$ | async">Loading...</p>
      <p class="text-center text-danger small w-75 mx-auto" *ngIf="errorMsg$ | async; let errorMsg">{{ errorMsg }}</p>
    </form>
  </div>
</div>
